# Production Environment Configuration
# Copy this file to .env.production and fill in actual values
# NEVER commit .env.production to Git!

# ============================================
# SECURITY SETTINGS (CRITICAL)
# ============================================

# Secret key for JWT and session encryption
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_THIS_TO_RANDOM_SECRET_KEY

# Enable production security features
PRODUCTION_MODE=True
DEBUG=False

# ============================================
# DATABASE CONFIGURATION
# ============================================

# PostgreSQL connection string (recommended for production)
DATABASE_URL=postgresql://username:password@localhost:5432/dchat_production

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ============================================
# WEB3 CONFIGURATION
# ============================================

# Ethereum Mainnet RPC (use Infura/Alchemy for reliability)
WEB3_PROVIDER_URI=https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID
# Alternative: https://eth-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_KEY

# Chain ID (1 = Ethereum Mainnet)
CHAIN_ID=1

# Gas settings
GAS_PRICE_STRATEGY=medium  # slow, medium, fast
GAS_PRICE_MULTIPLIER=1.2  # 20% buffer for safety

# ============================================
# CUSTODIAL WALLET CONFIGURATION
# ============================================

# Master wallet for platform operations
MASTER_WALLET_ADDRESS=0xYOUR_MASTER_WALLET_ADDRESS
MASTER_WALLET_PRIVATE_KEY=YOUR_ENCRYPTED_PRIVATE_KEY

# Wallet encryption key (AES-256)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
WALLET_ENCRYPTION_KEY=CHANGE_THIS_TO_RANDOM_ENCRYPTION_KEY

# ============================================
# RATE LIMITING (ENABLED IN PRODUCTION)
# ============================================

# Enable rate limiting
RATE_LIMIT_ENABLED=True

# Rate limit settings
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# Withdrawal rate limits
WITHDRAWAL_RATE_LIMIT_PER_HOUR=10
WITHDRAWAL_RATE_LIMIT_PER_DAY=50

# ============================================
# WITHDRAWAL LIMITS (ENABLED IN PRODUCTION)
# ============================================

# Enable withdrawal limits
WITHDRAWAL_LIMITS_ENABLED=True

# Daily withdrawal limits (in USD equivalent)
DAILY_WITHDRAWAL_LIMIT_USD=10000
WEEKLY_WITHDRAWAL_LIMIT_USD=50000
MONTHLY_WITHDRAWAL_LIMIT_USD=200000

# Single transaction limits
MIN_WITHDRAWAL_AMOUNT_USD=10
MAX_WITHDRAWAL_AMOUNT_USD=50000

# ============================================
# TOKEN CONTRACTS (MAINNET)
# ============================================

# USDT (Tether USD)
USDT_CONTRACT_ADDRESS=0xdAC17F958D2ee523a2206206994597C13D831ec7

# USDC (USD Coin)
USDC_CONTRACT_ADDRESS=0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48

# DAI (Dai Stablecoin)
DAI_CONTRACT_ADDRESS=0x6B175474E89094C44Da98b954EedeAC495271d0F

# WETH (Wrapped Ether)
WETH_CONTRACT_ADDRESS=0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2

# ============================================
# MONITORING & LOGGING
# ============================================

# Enable comprehensive logging
LOGGING_ENABLED=True
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# Log file paths
LOG_FILE_PATH=/var/log/dchat/app.log
ERROR_LOG_FILE_PATH=/var/log/dchat/error.log
AUDIT_LOG_FILE_PATH=/var/log/dchat/audit.log

# Sentry error tracking (optional but recommended)
SENTRY_DSN=https://YOUR_SENTRY_DSN@sentry.io/PROJECT_ID
SENTRY_ENVIRONMENT=production

# ============================================
# SOCKET.IO CONFIGURATION
# ============================================

# Socket.IO server settings
SOCKET_HOST=0.0.0.0
SOCKET_PORT=5000
SOCKET_PING_TIMEOUT=60
SOCKET_PING_INTERVAL=25

# ============================================
# REDIS CONFIGURATION (FOR CACHING & SESSIONS)
# ============================================

# Redis connection
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=YOUR_REDIS_PASSWORD

# Cache settings
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300

# ============================================
# CORS CONFIGURATION
# ============================================

# Allowed origins (comma-separated)
CORS_ORIGINS=https://dchat.pro,https://www.dchat.pro

# ============================================
# EMAIL CONFIGURATION (FOR NOTIFICATIONS)
# ============================================

# SMTP settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@dchat.pro
SMTP_PASSWORD=YOUR_EMAIL_PASSWORD
SMTP_FROM=noreply@dchat.pro

# ============================================
# BACKUP CONFIGURATION
# ============================================

# Automated backup settings
BACKUP_ENABLED=True
BACKUP_INTERVAL_HOURS=6
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=dchat-backups
BACKUP_S3_REGION=us-east-1

# ============================================
# PERFORMANCE SETTINGS
# ============================================

# Worker processes (for Gunicorn)
WORKERS=4
WORKER_CLASS=gevent
WORKER_CONNECTIONS=1000
WORKER_TIMEOUT=30

# ============================================
# SECURITY HEADERS
# ============================================

# Enable security headers
SECURITY_HEADERS_ENABLED=True

# Content Security Policy
CSP_ENABLED=True
CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"

# ============================================
# FEATURE FLAGS
# ============================================

# Enable/disable features
FEATURE_CHAT_TRANSFERS=True
FEATURE_ERC20_WITHDRAWAL=True
FEATURE_CUSTODIAL_WALLET=True
FEATURE_NFT_AVATARS=True
FEATURE_SUBSCRIPTIONS=True

# ============================================
# MAINTENANCE MODE
# ============================================

# Enable maintenance mode (disables all API endpoints)
MAINTENANCE_MODE=False
MAINTENANCE_MESSAGE="System is under maintenance. Please try again later."

# ============================================
# HEALTH CHECK
# ============================================

# Health check endpoint
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_PATH=/api/health

# ============================================
# NOTES
# ============================================

# 1. NEVER commit this file with real credentials to Git
# 2. Use environment variables or secrets management (e.g., AWS Secrets Manager)
# 3. Rotate credentials regularly (at least every 90 days)
# 4. Use strong, randomly generated passwords
# 5. Enable 2FA on all external services (Infura, Alchemy, etc.)
# 6. Monitor logs for suspicious activity
# 7. Set up alerts for critical errors
# 8. Perform regular security audits
# 9. Keep dependencies up to date
# 10. Follow principle of least privilege for all accounts
